\documentclass[12pt,fleqn]{article}\usepackage{../common}
\begin{document}

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
import numpy as np
df = pd.read_csv('data/celeb_astro_mbti.csv',sep=';')
df['label'] = (df['mbti1']=='Te').astype(float)
df = df.drop(['mbti','mbti1','mbti2'],axis=1)
\end{minted}


\begin{minted}[fontsize=\footnotesize]{python}
import statsmodels.api as sm
import statsmodels.formula.api as smf
s = "label ~ C(spiller) + C(chinese) + C(M2) "
mdlm = smf.logit(s, data=df)
mdlmf = mdlm.fit()
print(mdlmf.summary())
\end{minted}

\begin{verbatim}
Warning: Maximum number of iterations has been exceeded.
         Current function value: 0.434079
         Iterations: 35
                           Logit Regression Results                           
==============================================================================
Dep. Variable:                  label   No. Observations:                  426
Model:                          Logit   Df Residuals:                      393
Method:                           MLE   Df Model:                           32
Date:                Sun, 22 Mar 2015   Pseudo R-squ.:                 0.08137
Time:                        21:29:17   Log-Likelihood:                -184.92
converged:                      False   LL-Null:                       -201.30
                                        LLR p-value:                    0.4295
=============================================================================================
                                coef    std err          z      P>|z|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------------
Intercept                    -0.5260      1.053     -0.500      0.617        -2.590     1.538
C(spiller)[T.Aries]           0.6805      0.780      0.873      0.383        -0.847     2.208
C(spiller)[T.Cancer]          1.0084      0.716      1.408      0.159        -0.395     2.412
C(spiller)[T.Capricorn]       0.3729      0.757      0.493      0.622        -1.110     1.856
C(spiller)[T.Gemini]         -0.1845      0.787     -0.234      0.815        -1.727     1.358
C(spiller)[T.Leo]             0.6786      0.757      0.897      0.370        -0.805     2.162
C(spiller)[T.Libra]          -0.1452      0.758     -0.192      0.848        -1.631     1.341
C(spiller)[T.Pisces]          0.8454      0.724      1.168      0.243        -0.573     2.264
C(spiller)[T.Sagittarius]    -0.2020      0.798     -0.253      0.800        -1.766     1.362
C(spiller)[T.Scorpio]         0.1553      0.810      0.192      0.848        -1.433     1.743
C(spiller)[T.Taurus]         -0.6661      0.848     -0.785      0.432        -2.328     0.996
C(spiller)[T.Virgo]           0.5421      0.774      0.701      0.484        -0.975     2.059
C(chinese)[T.Dragon]         -1.0834      0.694     -1.561      0.118        -2.443     0.277
C(chinese)[T.Horse]           0.1612      0.652      0.247      0.805        -1.116     1.439
C(chinese)[T.Monkey]         -2.1420      0.890     -2.406      0.016        -3.887    -0.397
C(chinese)[T.Ox]             -0.5375      0.645     -0.833      0.405        -1.803     0.728
C(chinese)[T.Pig]            -0.4151      0.667     -0.622      0.534        -1.722     0.892
C(chinese)[T.Rabbit]         -0.9462      0.677     -1.398      0.162        -2.272     0.380
C(chinese)[T.Rat]            -1.0154      0.822     -1.235      0.217        -2.626     0.595
C(chinese)[T.Rooster]        -0.5722      0.644     -0.888      0.374        -1.835     0.690
C(chinese)[T.Sheep]          -0.3903      0.633     -0.617      0.537        -1.631     0.850
C(chinese)[T.Snake]          -0.8595      0.707     -1.215      0.224        -2.246     0.527
C(chinese)[T.Tiger]          -0.6180      0.611     -1.012      0.312        -1.815     0.579
C(M2)[T.3]                   -1.0505      0.976     -1.077      0.282        -2.962     0.861
C(M2)[T.4]                   -0.8369      0.887     -0.943      0.346        -2.576     0.902
C(M2)[T.5]                   -0.3830      0.892     -0.429      0.668        -2.132     1.366
C(M2)[T.6]                   -0.5545      0.901     -0.616      0.538        -2.320     1.211
C(M2)[T.7]                   -0.3626      0.865     -0.419      0.675        -2.058     1.333
C(M2)[T.8]                   -0.7939      0.914     -0.869      0.385        -2.585     0.997
C(M2)[T.9]                   -1.4973      0.979     -1.530      0.126        -3.415     0.421
C(M2)[T.10]                  -0.5959      0.884     -0.674      0.500        -2.328     1.136
C(M2)[T.11]                  -1.0647      0.916     -1.163      0.245        -2.859     0.730
C(M2)[T.12]                 -27.2406   7.32e+05  -3.72e-05      1.000     -1.44e+06  1.44e+06
=============================================================================================
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
print df.groupby(['chinese','spiller']).size()
\end{minted}

\begin{verbatim}
chinese  spiller 
Dog      Aquarius    5
         Cancer      5
         Gemini      9
         Libra       9
         Pisces      6
         Scorpio     6
         Taurus      1
         Virgo       1
Dragon   Aquarius    4
         Cancer      5
         Gemini      2
         Libra       9
         Pisces      4
         Scorpio     3
         Taurus      6
...
Snake    Aquarius        5
         Capricorn       2
         Gemini          7
         Libra          11
         Taurus          5
         Virgo           6
Tiger    Aquarius        1
         Aries           4
         Cancer         10
         Leo             5
         Libra           2
         Pisces          6
         Sagittarius    13
         Scorpio         2
         Taurus          1
Length: 90, dtype: int64
\end{verbatim}


\end{document}
