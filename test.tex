\documentclass[12pt,fleqn]{article}\usepackage{../common}
\begin{document}

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
import numpy as np
df = pd.read_csv('data/celeb_astro_mbti.csv',sep=';')
df['label'] = (df['mbti1']=='Si').astype(float)
df = df.drop(['mbti','mbti1','mbti2'],axis=1)
lewi = map(lambda x: 'lewi'+str(x),range(278))
df['diversity'] = df[lewi].sum(axis=1)
df['total'] = 1
\end{minted}


\begin{minted}[fontsize=\footnotesize]{python}
import statsmodels.api as sm
import statsmodels.formula.api as smf
s = "label ~ C(spiller) + C(chinese) + C(M2) + diversity "
mdlm = smf.logit(s, data=df)
mdlmf = mdlm.fit()
print(mdlmf.summary())
\end{minted}

\begin{verbatim}
Optimization terminated successfully.
         Current function value: 0.353134
         Iterations 8
                           Logit Regression Results                           
==============================================================================
Dep. Variable:                  label   No. Observations:                  426
Model:                          Logit   Df Residuals:                      392
Method:                           MLE   Df Model:                           33
Date:                Sun, 22 Mar 2015   Pseudo R-squ.:                  0.1125
Time:                        21:54:36   Log-Likelihood:                -150.43
converged:                       True   LL-Null:                       -169.51
                                        LLR p-value:                    0.2467
=============================================================================================
                                coef    std err          z      P>|z|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------------
Intercept                    -1.8601      1.529     -1.217      0.224        -4.857     1.137
C(spiller)[T.Aries]           0.4041      0.959      0.421      0.674        -1.476     2.284
C(spiller)[T.Cancer]          1.1471      0.888      1.292      0.197        -0.594     2.888
C(spiller)[T.Capricorn]      -0.0407      0.975     -0.042      0.967        -1.952     1.870
C(spiller)[T.Gemini]          0.5194      0.837      0.621      0.535        -1.120     2.159
C(spiller)[T.Leo]             1.6042      0.891      1.800      0.072        -0.143     3.351
C(spiller)[T.Libra]          -1.6821      1.217     -1.382      0.167        -4.067     0.703
C(spiller)[T.Pisces]          1.1445      0.901      1.270      0.204        -0.622     2.911
C(spiller)[T.Sagittarius]     1.5646      0.862      1.816      0.069        -0.124     3.253
C(spiller)[T.Scorpio]         0.6249      0.967      0.646      0.518        -1.271     2.521
C(spiller)[T.Taurus]          0.5916      0.834      0.709      0.478        -1.044     2.227
C(spiller)[T.Virgo]          -0.3577      1.026     -0.349      0.727        -2.368     1.653
C(chinese)[T.Dragon]         -0.3486      0.820     -0.425      0.671        -1.957     1.259
C(chinese)[T.Horse]          -0.4953      0.830     -0.597      0.550        -2.121     1.131
C(chinese)[T.Monkey]         -0.4687      0.773     -0.607      0.544        -1.983     1.045
C(chinese)[T.Ox]             -0.3724      0.734     -0.507      0.612        -1.812     1.067
C(chinese)[T.Pig]            -0.2067      0.832     -0.248      0.804        -1.837     1.424
C(chinese)[T.Rabbit]         -0.7104      0.774     -0.918      0.359        -2.227     0.807
C(chinese)[T.Rat]             0.8815      0.773      1.141      0.254        -0.633     2.396
C(chinese)[T.Rooster]        -1.5988      0.929     -1.720      0.085        -3.420     0.223
C(chinese)[T.Sheep]          -0.5178      0.752     -0.689      0.491        -1.991     0.956
C(chinese)[T.Snake]           0.6461      0.750      0.862      0.389        -0.824     2.116
C(chinese)[T.Tiger]          -1.2148      0.796     -1.526      0.127        -2.775     0.346
C(M2)[T.3]                   -1.7032      1.560     -1.092      0.275        -4.761     1.355
C(M2)[T.4]                   -0.5448      1.265     -0.431      0.667        -3.025     1.935
C(M2)[T.5]                   -0.6321      1.306     -0.484      0.628        -3.193     1.928
C(M2)[T.6]                    0.3092      1.256      0.246      0.805        -2.152     2.770
C(M2)[T.7]                   -0.1750      1.250     -0.140      0.889        -2.625     2.275
C(M2)[T.8]                    0.2832      1.245      0.227      0.820        -2.157     2.723
C(M2)[T.9]                   -0.0267      1.265     -0.021      0.983        -2.506     2.452
C(M2)[T.10]                   0.0335      1.243      0.027      0.978        -2.402     2.469
C(M2)[T.11]                   0.0199      1.247      0.016      0.987        -2.424     2.464
C(M2)[T.12]                   1.4617      1.580      0.925      0.355        -1.635     4.558
diversity                    -0.0224      0.056     -0.403      0.687        -0.131     0.086
=============================================================================================
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
print df.groupby(['chinese','spiller']).sum()[['label','total']]
\end{minted}

\begin{verbatim}
                     label  total
chinese spiller                  
Dog     Aquarius         0      5
        Cancer           3      5
        Gemini           0      9
        Libra            0      9
        Pisces           1      6
        Scorpio          1      6
        Taurus           1      1
        Virgo            0      1
Dragon  Aquarius         1      4
        Cancer           1      5
        Gemini           0      2
        Libra            0      9
        Pisces           1      4
        Scorpio          0      3
        Taurus           0      6
Horse   Aquarius         0      1
        Aries            0      3
        Capricorn        0      9
        Leo              0      2
        Libra            0      1
        Sagittarius      2      5
        Taurus           1      6
        Virgo            1      7
Monkey  Aries            2     13
        Cancer           0      3
        Leo              1      5
        Pisces           0      5
        Sagittarius      2      6
        Scorpio          0      3
Ox      Aries            1      6
...                    ...    ...
Rooster Cancer           0      4
        Gemini           0      1
        Leo              1      5
        Pisces           0     10
        Sagittarius      0      2
        Scorpio          0      5
Sheep   Aries            0      3
        Cancer           0      2
        Capricorn        1      4
        Leo              3     14
        Pisces           2      3
        Sagittarius      0      4
        Scorpio          0      2
        Taurus           1      6
        Virgo            0      4
Snake   Aquarius         0      5
        Capricorn        0      2
        Gemini           3      7
        Libra            1     11
        Taurus           1      5
        Virgo            1      6
Tiger   Aquarius         0      1
        Aries            0      4
        Cancer           0     10
        Leo              0      5
        Libra            0      2
        Pisces           0      6
        Sagittarius      3     13
        Scorpio          0      2
        Taurus           1      1

[90 rows x 2 columns]
\end{verbatim}


\end{document}
