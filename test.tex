\documentclass[12pt,fleqn]{article}\usepackage{../common}
\begin{document}

\begin{minted}[fontsize=\footnotesize]{python}
import pandas as pd
import numpy as np
df = pd.read_csv('data/celeb_astro_mbti.csv',sep=';')
df['label'] = (df['mbti1']=='Ti').astype(float)
df = df.drop(['mbti','mbti1','mbti2'],axis=1)
\end{minted}

\begin{minted}[fontsize=\footnotesize]{python}
import statsmodels.api as sm
import statsmodels.formula.api as smf
s = "label ~ C(spiller) + C(chinese) + C(M1)"
mdlm = smf.logit(s, data=df)
print(mdlmf.summary())
\end{minted}

\begin{verbatim}
                           Logit Regression Results                           
==============================================================================
Dep. Variable:                  label   No. Observations:                  426
Model:                          Logit   Df Residuals:                      377
Method:                           MLE   Df Model:                           48
Date:                 So, 22 Nov 2015   Pseudo R-squ.:                  0.1263
Time:                        07:33:32   Log-Likelihood:                -216.19
converged:                      False   LL-Null:                       -247.45
                                        LLR p-value:                   0.07782
=============================================================================================
                                coef    std err          z      P>|z|      [95.0% Conf. Int.]
---------------------------------------------------------------------------------------------
Intercept                    -0.4433      1.764     -0.251      0.802        -3.900     3.013
C(spiller)[T.Aries]          -0.1699      0.708     -0.240      0.810        -1.558     1.218
C(spiller)[T.Cancer]         -0.1105      0.653     -0.169      0.866        -1.390     1.169
C(spiller)[T.Capricorn]       0.1274      0.657      0.194      0.846        -1.161     1.415
C(spiller)[T.Gemini]         -0.1198      0.678     -0.177      0.860        -1.450     1.210
C(spiller)[T.Leo]            -0.3862      0.687     -0.562      0.574        -1.733     0.960
C(spiller)[T.Libra]           0.9825      0.619      1.586      0.113        -0.231     2.196
C(spiller)[T.Pisces]         -0.2232      0.675     -0.331      0.741        -1.546     1.100
C(spiller)[T.Sagittarius]    -0.5284      0.664     -0.795      0.426        -1.831     0.774
C(spiller)[T.Scorpio]        -0.0901      0.730     -0.123      0.902        -1.520     1.340
C(spiller)[T.Taurus]         -0.4994      0.660     -0.757      0.449        -1.793     0.794
C(spiller)[T.Virgo]          -0.3913      0.725     -0.539      0.590        -1.813     1.031
C(chinese)[T.Dragon]          1.5774      0.653      2.415      0.016         0.297     2.858
C(chinese)[T.Horse]           1.2708      0.707      1.797      0.072        -0.115     2.657
C(chinese)[T.Monkey]          1.4644      0.709      2.065      0.039         0.075     2.854
C(chinese)[T.Ox]              1.6190      0.671      2.412      0.016         0.303     2.935
C(chinese)[T.Pig]             1.9799      0.659      3.003      0.003         0.687     3.272
C(chinese)[T.Rabbit]          0.6795      0.706      0.963      0.335        -0.703     2.062
C(chinese)[T.Rat]             1.1685      0.826      1.414      0.157        -0.451     2.788
C(chinese)[T.Rooster]         0.6311      0.773      0.816      0.414        -0.885     2.147
C(chinese)[T.Sheep]           0.5334      0.754      0.707      0.479        -0.945     2.012
C(chinese)[T.Snake]           0.6276      0.676      0.928      0.353        -0.698     1.953
C(chinese)[T.Tiger]           1.8165      0.663      2.738      0.006         0.516     3.117
C(M1)[T.18]                 -20.8500   1.63e+04     -0.001      0.999      -3.2e+04  3.19e+04
C(M1)[T.19]                  -1.3676      1.792     -0.763      0.445        -4.879     2.144
C(M1)[T.20]                  -2.5004      1.843     -1.357      0.175        -6.112     1.111
C(M1)[T.21]                  -1.8969      2.008     -0.945      0.345        -5.833     2.039
C(M1)[T.22]                  -0.3168      1.695     -0.187      0.852        -3.640     3.006
C(M1)[T.23]                  -1.7969      1.770     -1.015      0.310        -5.267     1.673
C(M1)[T.24]                  -2.6673      1.801     -1.481      0.139        -6.197     0.863
C(M1)[T.25]                  -2.5839      1.714     -1.507      0.132        -5.943     0.776
C(M1)[T.26]                  -2.1338      1.672     -1.276      0.202        -5.411     1.143
C(M1)[T.27]                  -1.1700      1.684     -0.695      0.487        -4.470     2.130
C(M1)[T.28]                  -1.7543      1.633     -1.074      0.283        -4.955     1.447
C(M1)[T.29]                  -1.6516      1.659     -0.995      0.320        -4.904     1.601
C(M1)[T.30]                  -2.2926      1.682     -1.363      0.173        -5.590     1.005
C(M1)[T.31]                  -1.4949      1.638     -0.913      0.361        -4.705     1.715
C(M1)[T.32]                  -1.7452      1.652     -1.056      0.291        -4.984     1.493
C(M1)[T.33]                  -1.3099      1.662     -0.788      0.431        -4.568     1.948
C(M1)[T.34]                  -1.3200      1.662     -0.794      0.427        -4.577     1.937
C(M1)[T.35]                  -1.7722      1.714     -1.034      0.301        -5.131     1.587
C(M1)[T.36]                   0.3067      1.696      0.181      0.856        -3.016     3.630
C(M1)[T.37]                 -13.2452    167.747     -0.079      0.937      -342.023   315.533
C(M1)[T.38]                  -0.7460      1.735     -0.430      0.667        -4.146     2.654
C(M1)[T.39]                  -2.3161      2.030     -1.141      0.254        -6.295     1.662
C(M1)[T.40]                  -4.0431      5.409     -0.747      0.455       -14.644     6.558
C(M1)[T.41]                  -0.4587      2.233     -0.205      0.837        -4.835     3.918
C(M1)[T.42]                 -35.5129    2.7e+07  -1.32e-06      1.000     -5.28e+07  5.28e+07
C(M1)[T.43]                  -1.2635      2.016     -0.627      0.531        -5.214     2.687
=============================================================================================
\end{verbatim}

\begin{minted}[fontsize=\footnotesize]{python}
print df.groupby(['chinese','spiller']).sum()[['label','total']]
\end{minted}

\begin{verbatim}
                     label  total
chinese spiller                  
Dog     Aquarius         1      5
        Cancer           0      5
        Gemini           2      9
        Libra            2      9
        Pisces           1      6
        Scorpio          0      6
        Taurus           0      1
        Virgo            0      1
Dragon  Aquarius         2      4
        Cancer           2      5
        Gemini           0      2
        Libra            3      9
        Pisces           1      4
        Scorpio          1      3
        Taurus           2      6
Horse   Aquarius         0      1
        Aries            0      3
        Capricorn        1      9
        Leo              1      2
        Libra            1      1
        Sagittarius      1      5
        Taurus           4      6
        Virgo            2      7
Monkey  Aries            4     13
        Cancer           2      3
        Leo              0      5
        Pisces           3      5
        Sagittarius      0      6
        Scorpio          1      3
Ox      Aries            3      6
...                    ...    ...
Rooster Cancer           1      4
        Gemini           0      1
        Leo              0      5
        Pisces           2     10
        Sagittarius      0      2
        Scorpio          2      5
Sheep   Aries            0      3
        Cancer           0      2
        Capricorn        1      4
        Leo              2     14
        Pisces           0      3
        Sagittarius      2      4
        Scorpio          1      2
        Taurus           1      6
        Virgo            0      4
Snake   Aquarius         1      5
        Capricorn        0      2
        Gemini           2      7
        Libra            4     11
        Taurus           0      5
        Virgo            1      6
Tiger   Aquarius         0      1
        Aries            1      4
        Cancer           3     10
        Leo              3      5
        Libra            1      2
        Pisces           1      6
        Sagittarius      5     13
        Scorpio          1      2
        Taurus           0      1

[90 rows x 2 columns]
\end{verbatim}


\end{document}
